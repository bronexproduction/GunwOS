{
  // See https://go.microsoft.com/fwlink/?LinkId=733558
  // for the documentation about the tasks.json format
  "version": "2.0.0",
"tasks": [
    {
        "label": "Build and write floppy (rawwritewin)",
        "type": "shell",
        "command": "/mnt/d/Software/rawwritewin-0.7/rawwritewin.exe build/gunwos.img",
        "group": {
            "kind": "build",
            "isDefault": true
        },
        "dependsOn": [
            "Build and image"
        ],
        "problemMatcher": []
    },
    {
        "label": "Build and run (QEMU)",
        "type": "shell",
        "command": "bash scripts/qemu_run.sh",
        "windows": {
            "command": "export DISPLAY=:0 && scripts/qemu_run.sh build/gunwos.img"
        },
        "group": {
            "kind": "build",
            "isDefault": true
        },
        "dependsOn": [
            "Build and image"
        ],
        "problemMatcher": []
    },
    {
        "label": "Build and debug (QEMU)",
        "type": "shell",
        "command": "bash scripts/qemu_run_debug.sh",
        "windows": {
            "command": "export DISPLAY=:0 && scripts/qemu_run_debug.sh build/gunwos.img"
        },
        "group": {
            "kind": "build",
            "isDefault": false
        },
        "dependsOn": [
            "Build and image"
        ],
        "problemMatcher": []
    },
    {
        "label": "Build and run (VirtualBox)",
        "type": "shell",
        "command": "bash scripts/virtualbox_run.sh",
        "group": {
            "kind": "build",
            "isDefault": true
        },
        "dependsOn": [
            "Build and image"
        ],
        "problemMatcher": []
    },
    {
        "label": "Build and image",
        "type": "shell",
        "command": "make img",
        "group": {
            "kind": "build",
            "isDefault": false
        },
        "dependsOn": [
            "Build"
        ],
        "problemMatcher": []
    },
    {
        "label": "Build",
        "type": "shell",
        "command": "make clean all",
        "group": {
            "kind": "build",
            "isDefault": false
        },
        "problemMatcher": []
    },
    {
        "label": "Run tests",
        "type": "shell",
        "command": "make test",
        "group": {
            "kind": "test",
            "isDefault": false
        },
        "problemMatcher": []
    },
    {
        "label": "Install dependencies",
        "type": "shell",
        "windows": {
            "command": "sudo apt-get update && sudo apt-get install -y build-essential nasm qemu-system-x86 && curl https://doc-0o-3g-docs.googleusercontent.com/docs/securesc/06mhhhiffv0h8o1ssc8vog3knila3s6g/6n82sbm65rl3i5v04po4r4orel7a009h/1659449925000/17979975962784809247/17979975962784809247/1lFFKgdm-P1xWkPZV1mojCOeyCxg9KSrK?e=download&ax=AI9vYm5knXNKysMQ8tAS2nQOsOPo_Teqcwn_W96SO8S13AA3O0MXLtNDGFhKtzlCXmW1IMJ --output tools.zip && unzip tools.zip && rm tools.zip",
        },
        "linux": {
            "command": "sudo apt-get update && sudo apt-get install -y build-essential nasm qemu-system-x86 && curl https://doc-0o-3g-docs.googleusercontent.com/docs/securesc/06mhhhiffv0h8o1ssc8vog3knila3s6g/6n82sbm65rl3i5v04po4r4orel7a009h/1659449925000/17979975962784809247/17979975962784809247/1lFFKgdm-P1xWkPZV1mojCOeyCxg9KSrK?e=download&ax=AI9vYm5knXNKysMQ8tAS2nQOsOPo_Teqcwn_W96SO8S13AA3O0MXLtNDGFhKtzlCXmW1IMJ --output tools.zip && unzip tools.zip && rm tools.zip",
        },
        "osx": {
            "command": "brew install pup nasm qemu truncate && query=`curl -c ./cookie.txt -s -L \"https://drive.google.com/uc?export=download&id=1lFFKgdm-P1xWkPZV1mojCOeyCxg9KSrK\" | pup 'a#uc-download-link attr{href}' | sed -e 's/amp;//g'` && curl -b ./cookie.txt -L -o tools.zip \"https://drive.google.com${query}\" && rm cookie.txt",
            // "command": "brew install nasm qemu truncate",
        },
        "group": {
            "kind": "none",
            "isDefault": false
        }
    }
]
}
